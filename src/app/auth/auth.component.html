<div class="auth-wrapper" [ngClass]="{ 'dark-mode': isDarkMode }">
  <div class="auth-card">
    <!-- Header -->
    <div class="auth-header">
      <h2>{{ isLoginMode ? 'Login' : 'Sign Up' }}</h2>
      <p>{{ isLoginMode ? 'Welcome back! Please login to continue.' : 'Create a new account.' }}</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

    <!-- Form -->
    <form #authForm="ngForm" (ngSubmit)="onSubmit(authForm)" novalidate>

      <!-- Email -->
      <div class="form-group">
        <input type="email" id="email" name="email" ngModel required email placeholder=" " />
        <label for="email">Email</label>
        <span class="error" *ngIf="authForm.controls['email']?.invalid && authForm.controls['email']?.touched">
          Please enter a valid email
        </span>
      </div>

      <!-- Password -->
      <div class="form-group password-group">
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="password"
          name="password"
          ngModel
          required
          minlength="6"
          placeholder=" "
        />
        <label for="password">Password</label>
        <span class="toggle-pass" (click)="showPassword = !showPassword">
          {{ showPassword ? 'Hide' : 'Show' }}
        </span>
        <span class="error" *ngIf="authForm.controls['password']?.invalid && authForm.controls['password']?.touched">
          Password must be at least 6 characters
        </span>
      </div>

      <!-- Signup Fields -->
      <div *ngIf="!isLoginMode">
        <!-- First Name / Last Name -->
        <div class="form-row">
          <div class="form-group">
            <input type="text" id="firstName" name="firstName" ngModel required placeholder=" " />
            <label for="firstName">First Name</label>
          </div>
          <div class="form-group">
            <input type="text" id="lastName" name="lastName" ngModel required placeholder=" " />
            <label for="lastName">Last Name</label>
          </div>
        </div>

        <!-- DOB / Mobile -->
        <div class="form-row">
          <div class="form-group">
            <input type="date" id="dob" name="dob" [(ngModel)]="dateOfBirth" required placeholder=" " />
            <label for="dob">Date of Birth</label>
          </div>
          <div class="form-group">
            <input type="text" id="mobileNo" name="mobileNo" ngModel required placeholder=" " />
            <label for="mobileNo">Mobile No.</label>
          </div>
        </div>

        <!-- PAN / Gender -->
        <div class="form-row">
          <div class="form-group">
            <input type="text" id="pan" name="pan" ngModel required placeholder=" " />
            <label for="pan">PAN No.</label>
          </div>
          <div class="form-group">
            <select id="gender" name="gender" ngModel required>
              <option *ngFor="let gender of genders">{{ gender.name }}</option>
            </select>
            <label for="gender">Gender</label>
          </div>
        </div>

        <!-- Team / Designation -->
        <div class="form-row">
          <div class="form-group">
            <select
              id="team"
              name="team"
              [(ngModel)]="selectedTeam"
              (ngModelChange)="onTeamChange()"
              required
            >
              <option *ngFor="let team of teamsWithDesignations">{{ team.name }}</option>
            </select>
            <label for="team">Team</label>
          </div>
          <div class="form-group">
            <select id="designation" name="designation" ngModel required>
              <option *ngFor="let designation of designations">{{ designation }}</option>
            </select>
            <label for="designation">Designation</label>
          </div>
        </div>

        <!-- Address / Address2 -->
        <div class="form-group">
          <input type="text" id="address" name="address" ngModel required placeholder=" " />
          <label for="address">Address</label>
        </div>
        <div class="form-group">
          <input type="text" id="address2" name="address2" ngModel required placeholder=" " />
          <label for="address2">Address 2</label>
        </div>

        <!-- City / Zip -->
        <div class="form-row">
          <div class="form-group">
            <input type="text" id="city" name="city" ngModel required placeholder=" " />
            <label for="city">City</label>
          </div>
          <div class="form-group">
            <input type="text" id="zip" name="zip" ngModel required placeholder=" " />
            <label for="zip">Zip Code</label>
          </div>
        </div>
      </div>

      <!-- Submit -->
      <button type="submit" class="btn-primary" [disabled]="!authForm.valid">
        {{ isLoginMode ? 'Login' : 'Sign Up' }}
      </button>

      <!-- Switch Mode -->
      <p class="switch-text">
        <a href="#" (click)="onSwitchMode(); $event.preventDefault()">
          Switch to {{ isLoginMode ? 'Sign Up' : 'Login' }}
        </a>
      </p>
    </form>

    <!-- Loading -->
    <div class="loading-overlay" *ngIf="loading">
      <app-loading-spinner></app-loading-spinner>
    </div>
  </div>
</div>
