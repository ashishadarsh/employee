<div class="modern-modal">
  <div class="modal-header">
    <h3 class="modal-title">{{ title }}</h3>
    <button type="button" class="btn-close" (click)="closePopup()">‚ùå</button>
  </div>

  <form (ngSubmit)="onAddingTask()" [formGroup]="addTaskForm" class="modern-form" *ngIf="addTaskForm">
    <div class="form-body">
      <!-- Title -->
      <div class="form-floating">
        <input
          type="text"
          class="form-control"
          id="titleInput"
          placeholder="Enter Title"
          formControlName="title"
        />
        <label for="titleInput">Title</label>
      </div>

      <!-- Description -->
      <label for="description" style="font-weight: 500; margin-bottom: 0.4rem;">Description</label>
      <div class="NgxEditor__Wrapper">
        <ngx-editor-menu [editor]="editor" [toolbar]="toolbar" id="descriptionMenu"></ngx-editor-menu>
        <ngx-editor [editor]="editor" formControlName="description" id="descriptionEditor"></ngx-editor>
      </div>

      <!-- Status & Assign -->
      <div class="form-row">
        <div class="form-select-group">
          <label for="status">Status</label>
          <select id="status" formControlName="status">
            @for (status of statusOptions; track $index) {
              <option [value]="status.label">{{ status.label }}</option>
            }
          </select>
        </div>

        <div class="form-select-group">
          <label for="teamMember">Assign To</label>
          <select id="teamMember" formControlName="empId">
            @for (teamMemberData of teamData; track $index) {
              <option [value]="teamMemberData._id">{{ teamMemberData.firstName + ' '+ teamMemberData.lastName }}</option>
            }
          </select>
        </div>
      </div>

      <!-- Task Type & Completion Date -->
      <div class="form-row">
        <div class="form-select-group">
          <label for="taskType">Task Type</label>
          <select id="taskType" formControlName="type">
            @for (type of tasksType; track $index) {
              <option [value]="type.label">{{ type.label }}</option>
            }
          </select>
        </div>

        <div class="form-select-group">
          <label for="completionDate">Completion Date</label>
          <input type="date" id="completionDate" formControlName="completionDate" />
        </div>
      </div>
    </div>

    <!-- Fixed Buttons -->
    <div class="modal-buttons fixed-buttons">
      <button type="button" class="btn btn-secondary" (click)="closePopup()">Cancel</button>
      <button type="submit" class="btn btn-success" [disabled]="!addTaskForm.valid || loading">Save</button>
    </div>
  </form>
</div>
